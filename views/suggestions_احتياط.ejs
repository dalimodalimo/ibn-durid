<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>كشف الاحتياط - <%= today_name %></title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/css/print_style.css">
</head>
<body>

    <div class="no-print-bar">
        <div>
            <button onclick="window.print()" class="btn-print">
                <i class="fas fa-print"></i> طباعة الكشف الورقي
            </button>
        </div>
        <a href="/admin/absence-profs" style="text-decoration: none; color: #1a237e; font-weight: bold;">
            <i class="fas fa-undo"></i> العودة لإدارة الغياب
        </a>
    </div>

    <header class="official-header">
        <div class="side-info">
            وزارة التعليم<br>
            إدارة تعليم المنطقة<br>
            مدرسة ابن دريد
        </div>
        <div class="school-info">
            <h2>سجل توزيع حصص الانتظار (الاحتياط)</h2>
            <p>ليوم: <strong><%= today_name %></strong> | الموافق: <%= new Date().toLocaleDateString('ar-EG') %></p>
        </div>
        <div class="side-info" style="text-align: left;">
            الرقم: ...................<br>
            التاريخ: ...................<br>
            المرفقات: ...................
        </div>
    </header>

    <table class="print-table">
        <thead>
            <tr>
                <th style="width: 10%;">الحصة</th>
                <th style="width: 20%;">الصف والشعبة</th>
                <th style="width: 45%;">المعلم البديل المقترح</th>
                <th style="width: 25%;">توقيع المعلم بالعلم</th>
            </tr>
        </thead>
        <tbody>
            <% if(suggestions.length > 0) { %>
                <% suggestions.forEach(s => { %>
                    <tr>
                        <td><strong><%= s.hessa %></strong></td>
                        <td><%= s.classe %> / <%= s.section %></td>
                        <td>
                            <select class="teacher-select" style="width: 100%; padding: 5px; font-size: 1rem; border: 1px solid #ddd;">
                                <option value="">-- اختر المعلم البديل --</option>
                                <% s.available_profs.forEach(p => { %>
                                    <option><%= p.nom %> (<%= p.matiere %>)</option>
                                <% }) %>
                            </select>
                        </td>
                        <td></td> </tr>
                <% }) %>
            <% } else { %>
                <tr>
                    <td colspan="4" style="padding: 40px; color: #666;">لا توجد حصص مجدولة للمعلم الغائب اليوم.</td>
                </tr>
            <% } %>
        </tbody>
    </table>

    <footer style="margin-top: 80px; display: flex; justify-content: space-around; font-weight: bold;">
        <div style="text-align: center;">
            <p>مشرف الجدول المدرسي</p>
            <p style="margin-top: 30px;">...................................</p>
        </div>
        <div style="text-align: center;">
            <p>مدير المدرسة</p>
            <p style="margin-top: 30px;">...................................</p>
        </div>
    </footer>

</body>
</html>