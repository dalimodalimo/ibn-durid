<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title><%= titre %></title>
    <style>
        :root { --primary: #2c3e50; --accent: #3498db; --bg: #f4f7f6; --danger: #e74c3c; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; display: flex; }
        .sidebar { width: 250px; background: var(--primary); color: white; height: 100vh; padding: 20px; position: fixed; }
        .main { margin-right: 270px; padding: 40px; width: 100%; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .grid-settings { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        input, select { padding: 10px; border: 1px solid #ccc; border-radius: 6px; width: 100%; box-sizing: border-box; }
        .btn { background: var(--accent); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn:hover { opacity: 0.9; }
        .btn-save { background: #27ae60; margin-top: 10px; }
        .btn-danger { background: var(--danger); padding: 5px 10px; font-size: 12px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        th { background: #f8f9fa; }
        .flex-form { display: flex; gap: 10px; margin-bottom: 15px; }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª âš™ï¸</h2>
    <hr>
    <a href="/admin/dashboard" style="color:white; text-decoration:none;">ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
</div>

<div class="main">
    <h1><%= titre %></h1>

    <div class="grid-settings">
        <div class="card">
            <h3>ğŸ¢ ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ (Ø§Ù„ØµÙÙˆÙ)</h3>
            <form action="/admin/settings/classes/add" method="POST" class="flex-form">
                <input type="text" name="class_name" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ (Ù…Ø«Ø§Ù„: Ø§Ù„Ø®Ø§Ù…Ø³)" required>
                <input type="number" name="num_sections" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø´Ø¹Ø¨" min="1" max="15" required style="width: 100px;">
                <button type="submit" class="btn">Ø¥Ø¶Ø§ÙØ©</button>
            </form>
            
            <table>
                <thead>
                    <tr>
                        <th>Ø§Ù„ØµÙ</th>
                        <th>Ø§Ù„Ø´Ø¹Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©</th>
                        <th>Ø­Ø°Ù</th>
                    </tr>
                </thead>
                <tbody>
                    <% classes.forEach(c => { %>
                    <tr>
                        <td><b><%= c.class_name %></b></td>
                        <td>Ù…Ù† 1 Ø¥Ù„Ù‰ <%= c.num_sections %></td>
                        <td>
                            <form action="/admin/settings/classes/delete" method="POST" style="margin:0;">
                                <input type="hidden" name="class_id" value="<%= c.id %>">
                                <button type="submit" class="btn btn-danger">âŒ</button>
                            </form>
                        </td>
                    </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>

        <div class="card">
            <h3>ğŸ“š Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©</h3>
            <form action="/admin/settings/subjects/add" method="POST" class="flex-form">
                <input type="text" name="subject_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø© (Ù…Ø«Ù„: Ø¹Ù„ÙˆÙ…)" required>
                <button type="submit" class="btn">Ø¥Ø¶Ø§ÙØ©</button>
            </form>
            <table>
                <% subjects.forEach(sub => { %>
                    <tr>
                        <td style="text-align: right; padding-right: 20px;"><%= sub.name %></td>
                    </tr>
                <% }) %>
            </table>
        </div>
    </div>

    <div class="card">
        <h3>â° Ø¶Ø¨Ø· ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø­ØµØµ Ø§Ù„ÙŠÙˆÙ…ÙŠ</h3>
        <form action="/admin/settings/periods/update" method="POST">
            <table>
                <thead>
                    <tr><th>Ø§Ù„Ø­ØµØ©</th><th>ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡</th><th>ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</th></tr>
                </thead>
                <tbody>
                    <% for(let i=1; i<=8; i++) { %>
                    <tr>
                        <td>Ø§Ù„Ø­ØµØ© <%= i %> <input type="hidden" name="id[]" value="<%= i %>"></td>
                        <td><input type="time" name="start_time[]"></td>
                        <td><input type="time" name="end_time[]"></td>
                    </tr>
                    <% } %>
                </tbody>
            </table>
            <button type="submit" class="btn btn-save">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ</button>
        </form>
    </div>

    <div class="card">
        <h3>ğŸ” Ø¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†</h3>
        <table>
            <thead>
                <tr><th>Ø§Ù„Ù…Ø¹Ù„Ù…</th><th>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</th><th>ØªØ­Ø¯ÙŠØ«</th></tr>
            </thead>
            <tbody>
                <% teachers.forEach(t => { %>
                <tr>
                    <td><%= t.nom %></td>
                    <td><code><%= t.password %></code></td>
                    <td>
                        <form action="/admin/settings/password/update" method="POST" style="display:flex; gap:5px; justify-content: center;">
                            <input type="hidden" name="teacher_id" value="<%= t.id %>">
                            <input type="text" name="new_password" placeholder="Ø¬Ø¯ÙŠØ¯Ø©" required style="width: 100px;">
                            <button type="submit" class="btn" style="background:#e67e22; padding: 5px 10px;">ğŸ’¾</button>
                        </form>
                    </td>
                </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
</div>

</body>
</html>