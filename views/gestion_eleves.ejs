<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ - Ù…Ø¯Ø±Ø³Ø© Ø§Ø¨Ù† Ø¯Ø±ÙŠØ¯</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: #f0f2f5; padding: 20px; color: #333; }
        .container { max-width: 1000px; margin: auto; }
        .section { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
        h1 { color: #1a237e; border-bottom: 3px solid #1a237e; padding-bottom: 10px; }
        h2 { font-size: 1.2rem; color: #2c3e50; }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ© */
        .form-group { display: flex; gap: 15px; margin-bottom: 15px; align-items: flex-end; flex-wrap: wrap; }
        .input-box { display: flex; flex-direction: column; flex: 1; min-width: 200px; }
        .input-box label { font-size: 0.9rem; margin-bottom: 5px; font-weight: bold; color: #555; }
        
        input, select { padding: 12px; border: 1px solid #ccc; border-radius: 6px; font-size: 1rem; }
        .btn-add { background: #2e7d32; color: white; border: none; padding: 12px 25px; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-add:hover { background: #1b5e20; }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        table { width: 100%; border-collapse: collapse; background: white; margin-top: 10px; border-radius: 8px; overflow: hidden; }
        th, td { border: 1px solid #eee; padding: 14px; text-align: center; }
        th { background-color: #1a237e; color: white; font-weight: 500; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .btn-del { color: #d32f2f; text-decoration: none; font-weight: bold; padding: 5px 10px; border-radius: 4px; }
        .btn-del:hover { background: #ffebee; }
        
        .empty-state { padding: 40px; text-align: center; color: #7f8c8d; }
        .badge-class { background: #e8eaf6; color: #1a237e; padding: 4px 10px; border-radius: 20px; font-size: 0.85rem; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <a href="/admin/dashboard" style="text-decoration: none; font-weight: bold; color: #1a237e;">ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
    <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ (Gestion des Ã©lÃ¨ves)</h1>

    <div class="section">
        <h2>â• ØªØ³Ø¬ÙŠÙ„ Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
        <form action="/admin/eleves/ajouter" method="POST" class="form-group">
            <div class="input-box">
                <label>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…Ù„</label>
                <input type="text" name="nom" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ" required>
            </div>
            
            <div class="input-box">
                <label>Ø§Ù„ØµÙ ÙˆØ§Ù„Ø´Ø¹Ø¨Ø© Ø§Ù„Ù…ØªØ§Ø­Ø©</label>
                <select name="class_info" required>
                    <option value="">-- Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© --</option>
                    <% classes.forEach(c => { %>
                        <% for(let i=1; i <= c.num_sections; i++) { %>
                            <option value="<%= c.class_name %>|<%= i %>">
                                ØµÙ: <%= c.class_name %> - Ø´Ø¹Ø¨Ø©: <%= i %>
                            </option>
                        <% } %>
                    <% }) %>
                </select>
            </div>

            <button type="submit" class="btn-add">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </form>
    </div>

    <div class="section">
        <h2>ğŸ“‚ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹</h2>
        <table>
            <thead>
                <tr>
                    <th>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                    <th>Ø§Ù„ØµÙ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</th>
                    <th>Ø§Ù„Ø´Ø¹Ø¨Ø©</th>
                    <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                </tr>
            </thead>
            <tbody>
                <% if (eleves.length === 0) { %>
                    <tr><td colspan="4" class="empty-state">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø§Ø¨ Ù…Ø³Ø¬Ù„ÙˆÙ† Ø­Ø§Ù„ÙŠØ§Ù‹. Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø§Ø¨ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰.</td></tr>
                <% } else { %>
                    <% eleves.forEach(student => { %>
                    <tr>
                        <td style="text-align: right; padding-right: 30px;"><b><%= student.nom %></b></td>
                        <td><span class="badge-class"><%= student.classe %></span></td>
                        <td><%= student.section %></td>
                        <td>
                            <a href="/admin/eleves/supprimer/<%= student.id %>" class="btn-del" onclick="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø·Ø§Ù„Ø¨ <%= student.nom %> Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ')">Ø­Ø°Ù ğŸ—‘ï¸</a>
                        </td>
                    </tr>
                    <% }) %>
                <% } %>
            </tbody>
        </table>
    </div>
</div>

</body>
</html>